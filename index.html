<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Happy Birthday ❤️</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: black;
  overflow: hidden;
  font-family: 'Courier New', monospace;
}

/* CANVAS */
canvas {
  position: fixed;
  top: 0;
  left: 0;
}

/* ẢNH */
#slideshow {
  position: absolute;
  top: 10%;
  width: 100%;
  text-align: center;
  z-index: 2;
}

#slideshow img {
  max-width: 260px;
  max-height: 360px;
  border-radius: 16px;
  box-shadow: 0 0 25px rgba(255,105,180,0.7);
  opacity: 0;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  transition: opacity 1.5s ease-in-out;
}

/* CHỮ */
.typing {
  position: absolute;
  z-index: 3;
  top: 55%;
  width: 100%;
  text-align: center;
  color: white;
  font-size: 2rem;
  line-height: 1.7;
  white-space: pre-line;
  animation: heartbeat 1.5s infinite;
  text-shadow: 0 0 15px rgba(255,255,255,0.9);
}

/* NHỊP TIM */
@keyframes heartbeat {
  0% { transform: scale(1); }
  25% { transform: scale(1.05); }
  40% { transform: scale(1); }
  60% { transform: scale(1.05); }
  100% { transform: scale(1); }
}
</style>
</head>

<body>

<canvas id="matrix"></canvas>
<canvas id="hearts"></canvas>

<div id="slideshow">
  <img src="images/1.jpg">
  <img src="images/2.jpg">
  <img src="images/3.jpg">
  <img src="images/4.jpg">
  <img src="images/5.jpg">
  <img src="images/6.jpg">
  <img src="images/7.jpg">
</div>

<div class="typing" id="text"></div>

<script>
/* ===== MATRIX ===== */
const canvas = document.getElementById("matrix");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const letters = "01사랑생일축하해아이러브유";
const fontSize = 16;
const columns = canvas.width / fontSize;
const drops = Array(Math.floor(columns)).fill(1);

function drawMatrix() {
  ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "#00ff99";
  ctx.font = fontSize + "px monospace";

  for (let i = 0; i < drops.length; i++) {
    const text = letters[Math.floor(Math.random() * letters.length)];
    ctx.fillText(text, i * fontSize, drops[i] * fontSize);
    if (drops[i] * fontSize > canvas.height && Math.random() > 0.98) drops[i] = 0;
    drops[i]++;
  }
}
setInterval(drawMatrix, 35);

/* ===== HEART FALL ===== */
const heartCanvas = document.getElementById("hearts");
const hctx = heartCanvas.getContext("2d");
heartCanvas.width = window.innerWidth;
heartCanvas.height = window.innerHeight;

const hearts = [];

function createHeart() {
  hearts.push({
    x: Math.random() * heartCanvas.width,
    y: -20,
    size: Math.random() * 14 + 8,
    speed: Math.random() * 0.6 + 0.3
  });
}

function drawHearts() {
  hctx.clearRect(0, 0, heartCanvas.width, heartCanvas.height);
  hearts.forEach((h, i) => {
    hctx.font = h.size + "px Arial";
    hctx.fillStyle = "rgba(255,105,180,0.8)";
    hctx.fillText("❤", h.x, h.y);
    h.y += h.speed;
    if (h.y > heartCanvas.height) hearts.splice(i, 1);
  });
}

setInterval(createHeart, 450);
function animateHearts() {
  drawHearts();
  requestAnimationFrame(animateHearts);
}
animateHearts();

/* ===== SLIDESHOW ===== */
const images = document.querySelectorAll("#slideshow img");
let current = 0;
images[0].style.opacity = 1;

setInterval(() => {
  images[current].style.opacity = 0;
  current = (current + 1) % images.length;
  images[current].style.opacity = 1;
}, 3000);

/* ===== TYPING ===== */
const message = `사랑하는 사람에게,
생일 축하해.
나를 정말 많이 사랑해야 해.
매일매일 행복하길 바랄게.
사랑해.`;

let index = 0;
function typeText() {
  if (index < message.length) {
    document.getElementById("text").innerHTML += message.charAt(index);
    index++;
    setTimeout(typeText, 80);
  }
}
typeText();

/* RESIZE */
window.onresize = () => {
  canvas.width = heartCanvas.width = window.innerWidth;
  canvas.height = heartCanvas.height = window.innerHeight;
};
</script>

</body>
</html>
